<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" NAME="ROBOTS" CONTENT="NOARCHIVE"/>
<META HTTP-EQUIV="EXPIRES" CONTENT="0">
<title>兒童睡眠行為問卷</title>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="../../js/sleepQuestion.js"></script>
<link rel="stylesheet" href="../../vendor/bootstrap/css/bootstrap.min.css">
<link rel="stylesheet" href="../../vendor/jquery-confirm-v3.3.4/jquery-confirm.min.css">
<script src="../../vendor/jquery-confirm-v3.3.4/jquery-confirm.min.js"></script>
<script src="../../vendor/bootstrap/js/bootstrap.min.js"></script>
<style type="text/css">
  body {
  padding-top: 2rem;
}
.starter-template {
  padding: 0rem 1.5rem;
  text-align: center;
}
input[type=radio]{
  height: 30px;
  width: 30px;
}
.result {
  height: 100vh;
}
</style>
</head>
<body>
<div class="container">
  
  <div class="starter-template">
    <h1>兒童睡眠行為問卷（CSHQ）</h1>
    <p class="lead">（適用於學齡前和學齡兒童）
指導語：下面是一些關於孩子的睡眠習慣和睡眠中情况的問题，請請根據孩子最
近一周來的實際情形進行回答或選擇（只選一項，用“”鈎出）。
</p>
<p>。如果最近一周您家有特殊情况（如孩子因耳朵有炎症而睡不好覺、家裡的電視機壞了等），請根據另外最能代表平常情况的一周的情形來答。</p>
<p>請注意：經常：是指每周有5~7 次；有時：是指每周有 2~4 次；很少：是指每周有 0~1 次。</p>
<p>另外您認為這樣的睡眠習惯是否有問題？請用“”鈎出您的答案。是：表示認為有問題；否：表示認為沒有問題；不好判斷：表示無法判断是否有問题。謝謝您的合作！</p>
  </div>
    <form id="form" class="needs-validation">
      <div class="form-row">
        <div class="col-3"> <h3 class="mb-3">病歷號碼</h3></div>
        <div class="col-2"><input id="question_no" type="text" id="question_no" class="form-control" placeholder="" required=""></div>
      </div>
      <hr class="mb-4">
      <div id="part1">
        <h3 class="mb-3">1.臨睡前</h3>
        <div class="form-row">
          <div class="col-6">
            <label>您孩子每晚的上床時間一般在幾點幾分</label>
          </div>
          <div class="col-2">
            <select id="sleep_at_hour" name="sleep_at_hour" class="form-control" required="">
              <option value=""></option>
            </select>
          </div>
          <div class="col-1">
            <label>點</label>
          </div>
          <div class="col-2">
            <select id="sleep_at_minute" name="sleep_at_minute" class="form-control" required="">
              <option value=""></option>
            </select>
          </div>     
          <div class="col-1">
            <label>分</label>
          </div>
        </div>
        <hr class="mb-4">
      </div>
      <hr class="mb-3">
      <div id="part2">
        <h3 class="mb-3">2.睡眠行為</h3>
        <div class="form-row">
          <div class="col-6">
            <label>孩子每天睡眠的時間（含夜間和白天的睡眠）一般有多久</label>
          </div>

          <div class="col-2">
            <select id="sleep_time_hour" name="sleep_time_hour" class="form-control" required="">
              <option value=""></option>
            </select>
          </div>
          <div class="col-1">
            <label>小時又</label>
          </div>
          <div class="col-2">
            <select id="sleep_time_minute" name="sleep_time_minute" class="form-control" required="">
              <option value=""></option>
            </select>
          </div>
          <div class="col-1">
            <label>分鐘</label>
          </div>
        </div>
      <hr class="mb-3">
      </div>
      <hr class="mb-3">
      <div id="part3">
        <h3 class="mb-3">3.夜間覺醒</h3>
        <div class="form-row">
          <div class="col-6">
            <label>孩子夜間每次覺醒通常持續的時間為</label>
          </div>
          <div class="col-1">
            <input type="text" name="awake_time" maxlength="3" class="form-control" required="">
          </div>
          <div class="col-1">
            <label>分鐘</label>
          </div>
        </div>
      <hr class="mb-3">
      </div>
      <hr class="mb-3">
      <div id="part4">
        <h3 class="mb-3">4.早晨醒來與白天睡眠</h3>
        <div class="form-row">
          <div class="col-6">
            <label>孩子每天早晨通常在幾時幾分醒来</label>
          </div>
          <div class="col-2">
            <select id="awake_at_hour" name="awake_at_hour" class="form-control" required="">
              <option value=""></option>
            </select>
          </div>
          <div class="col-1">
            <label>點</label>
          </div>
          <div class="col-2">
            <select id="awake_at_minute" name="awake_at_minute" class="form-control" required="">
              <option value=""></option>
            </select>
          </div>     
          <div class="col-1">
            <label>分</label>
          </div>
          <!-- <div class="col-2">
            <input type="text" name="awake_at" maxlength="4" class="form-control" placeholder="e.g. 0630" required="">
          </div> -->
        </div>
      <hr class="mb-3">
      </div>
      <hr class="mb-3">
      <div id="part5">
        <h3 class="mb-3">5.孩子在下列活動中看起來非常困倦甚至睡着了（請選擇一項適合的内容）：</h3>
      <hr class="mb-3">
      </div>
      <hr class="mb-3">
      <button class="btn btn-primary btn-lg btn-block" type="submit">填寫完成</button>
    </form>
  <footer class="my-5 pt-5 text-muted text-center text-small">
    <p class="mb-1"></p>
    <ul class="list-inline">
    </ul>
  </footer>
</div>

</body>
<script type="text/javascript">
  
function sendData(){
    var serializeform = $('#form').serializeArray();
    data = objectifyForm(serializeform,'addSleepQuestion');
    console.log(data);
    data[1].midcase_id = $('#question_no').val();
    $.ajax({
        url:'../../Question/controller.php',
        type: 'POST',
        data:JSON.stringify(data),
        async:false,
        success:function(r){
                result=eval(r);
                console.log(result);
                if(result[0].status==200){
                    var success = '<div class="result d-flex flex-column justify-content-center align-items-center"><h1>新增成功 感謝您的填寫</h1></div>';
                    $('body').html(success);
                }else if(result[0].status==423){
                    $.confirm({
                        title: 'Encountered an error!',
                        icon: 'fa fa-warning',
                        content: result[1].reason,
                        type: 'red',
                        typeAnimated: true,
                        buttons: {
                            close: function () {
                            }
                        }
                    });
                }else{
                    $.confirm({
                        title: 'Encountered an error!',
                        content: '發生未預期的錯誤 請聯絡管理員',
                        type: 'red',
                        typeAnimated: true,
                        buttons: {
                            close: function () {
                            }
                        }
                    });
                }
        },
        error:function(err){
            $.confirm({
                title: 'Encountered an error!',
                content: '發生未預期的錯誤 請聯絡管理員',
                type: 'red',
                typeAnimated: true,
                buttons: {
                    close: function () {
                    }
                }
            });
        }
    });
}

</script>
</html>
